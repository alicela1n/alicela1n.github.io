<!doctype html><html lang=en><meta charset=utf-8><meta name=generator content="Hugo 0.108.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Need to use a different Linux distro? Just systemd-nspawn it!&nbsp;&ndash;&nbsp;Alice's Digital Notebook</title><link rel=stylesheet href=../../css/core.min.a678a8fcd442e588a3ce898bbe660b06284fb8602630b560fbd95e9c1e45f45ca7ca327d2f4cdbb0d0a8da2f0ebf8084.css integrity=sha384-pnio/NRC5YijzomLvmYLBihPuGAmMLVg+9lenB5F9FynyjJ9L0zbsNCo2i8Ov4CE><meta name=twitter:card content="summary"><meta name=twitter:title content="Need to use a different Linux distro? Just systemd-nspawn it!"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=../../><span class="site name">Alice's Digital Notebook</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=../../categories/>Categories</a><a class="nav item" href=../../tags/>Tags</a><a class="nav item" href=../../about/>About</a></nav></div></span></div><div class="site slogan"><span class=title>100% JavaScript-free</span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Need to use a different Linux distro? Just systemd-nspawn it!</h1><p class="article date">Aug 22, 2020</p></section><article class="article markdown-body"><p>I&rsquo;ve been using Linux on my main computer for over a year and a half now, distro hopping because I always somehow find something wrong with the distro I&rsquo;m using. Whether it be that I need to use a different version of the GCC compiler than the one in the distro&rsquo;s repos or something else. I&rsquo;ve been trying Ubuntu, Debian, Arch, Gentoo, and some other ones like Fedora, Manjaro, openSUSE, Void Linux but none of them seemed to solve the problems I was having where I always need access to a package not in that distro&rsquo;s repositories, Arch is the best right for me right now because it has the AUR (Arch User Repository) which has most stuff but not everything. There&rsquo;s a few solutions I could think of but I hated all of them.</p><h1 id=bedrock-linux><strong>Bedrock Linux</strong></h1><p>Bedrock Linux is a script that turns your Linux install into a hybrid thing where you have access to tons of different Linux distros, in theory it sounds great but in practice it&rsquo;s just horrible. It&rsquo;s a mess and there&rsquo;s always a possibility of breaking your bedrock install. I don&rsquo;t recommend using this at all.</p><h1 id=virtual-machines><strong>Virtual Machines</strong></h1><p>I was thinking of setting up some virtual machines of different distros using libvirt, but it&rsquo;s an extreme waste of resources and consumes tons of drive space, I also don&rsquo;t have access to all the computer&rsquo;s resources inside the VM which is a problem when I want to speed up compiling or do more intensive tasks.</p><h1 id=dualbooting><strong>Dualbooting</strong></h1><p>No, just no.</p><h1 id=chroot><strong>Chroot</strong></h1><p>Chroot is a decent solution but it&rsquo;s limited and doesn&rsquo;t have the same advantages as using a container system like systemd-nspawn.</p><h1 id=docker-or-other-container-systems><strong>Docker or other container systems</strong></h1><p>Not built into the OS and I prefer things that are built in because it&rsquo;s more minimal. Docker and other solutions are also typically more complicated to setup and I like simplicity.</p><h1 id=this-is-where-systemd-nspawn-comes-in><strong>This is where systemd-nspawn comes in</strong></h1><p>Systemd-nspawn is simple to configure and use, built into most Linux distros that use systemd (almost all of them at this point), and lightweight. It has many advantages over chroot such as:</p><ul><li>More control over your container</li><li>Native solution, no need to use bash scripts or anything to automate it since it just runs as a systemd service</li><li>Easy to setup, again&mldr;no bash scripts or anything else needed</li><li>Better security, systemd-nspawn restricts access to various kernel interfaces to read only, such as /sys, /proc/sys or /sys/fs/selinux. Network interfaces and system clock cannot be changed from inside the container, device nodes cannot be created, and kernel modules cannot be loaded or unloaded. (source: <a href=https://wiki.archlinux.org/index.php/Systemd-nspawn target=_blank rel="noopener noreferrer">arch wiki</a>
)</li><li>Fully virtualizes filesystem hiearchy and process tree, IPC subsystems and host and domain name. (source: <a href=https://wiki.archlinux.org/index.php/Systemd-nspawn target=_blank rel="noopener noreferrer">arch wiki</a>
)</li></ul><h1 id=setting-up-systemd-nspawn><strong>Setting up systemd-nspawn</strong></h1><p>Some good places to look are the <a href=https://wiki.archlinux.org/index.php/Systemd-nspawn target=_blank rel="noopener noreferrer">Arch Wiki</a>
, <a href=https://wiki.debian.org/nspawn target=_blank rel="noopener noreferrer">Debian Wiki</a>
, and <a href=https://www.freedesktop.org/software/systemd/man/systemd-nspawn.html target=_blank rel="noopener noreferrer">freedesktop.org</a>
.</p><h1 id=use-cases><strong>Use cases</strong></h1><ul><li>Development</li><li>Testing and packaging for different distros</li><li><a href=https://ramsdenj.com/2016/09/23/containerizing-graphical-applications-on-linux-with-systemd-nspawn.html target=_blank rel="noopener noreferrer">Containerizing graphical applications</a></li><li>Sandboxing</li></ul><h1 id=conclusion><strong>Conclusion</strong></h1><p>I think systemd-nspawn is a really nice solution, it seems to work well and is a simple, lightweight solution that is built into the OS.</p></article><section class="article author"><img class=avatar src="https://avatars.githubusercontent.com/u/18562602?v=4" alt><p class=name>alicela1n</p><div class=bio>Magical girl from another dimension.</div><div class=details><a class=item href=https://github.com/alicela1n target=_blank rel="noopener noreferrer"><span class="iconfont icon-github"></span>&nbsp;alicela1n</a></div></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=../../post/2020-08-23-osx-10.5-ppc-in-qemu-with-working-audio/><span class="iconfont icon-article"></span>Working audio in Mac OS X 10.5 (or 10.4) PPC in QEMU</a></p><p><a class=link href=../../post/2020-06-26-dumping-shsh-and-restoring-iphone-without-losing-ios-version/><span class="iconfont icon-article"></span>Dumping SHSH and restoring 32bit iOS device</a></p></section></div></section><section id=footer><div style=display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between><p style=flex-shrink:0>Â©2022 alicela1n</p><a rel=me href=https://mastodon.online/@alicela1n>Mastodon</a><p><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section></body></html>