<!doctype html><html lang=en><meta charset=utf-8><meta name=generator content="Hugo 0.108.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Case Study: Updating old install of Arch Linux&nbsp;&ndash;&nbsp;Alice's Digital Notebook</title><link rel=stylesheet href=../../css/core.min.a678a8fcd442e588a3ce898bbe660b06284fb8602630b560fbd95e9c1e45f45ca7ca327d2f4cdbb0d0a8da2f0ebf8084.css integrity=sha384-pnio/NRC5YijzomLvmYLBihPuGAmMLVg+9lenB5F9FynyjJ9L0zbsNCo2i8Ov4CE><meta name=twitter:card content="summary"><meta name=twitter:title content="Case Study: Updating old install of Arch Linux"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=../../><span class="site name">Alice's Digital Notebook</span></a></span>
<span class="header right-side"><a class="nav item" href=../../pages/about/><span class="iconfont icon-aboutus"></span>&nbsp;About</a>
<a class="nav item" href=https://github.com/alicela1n target=_blank><span class="iconfont icon-logo_github"></span>&nbsp;Github</a>
<a rel=me href=https://mastodon.online/@alicela1n>Mastodon</a></span></div><div class="site slogan"><span class=title>100% JavaScript-free</span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Case Study: Updating old install of Arch Linux</h1><p class="article date">Jul 05, 2021</p></section><article class="article markdown-body"><p><img src=../../assets/upgrading-old-arch-install/Screenshot_20210702_165829.png alt="screenshot prior upgrade"></p><h1 id=introduction>Introduction</h1><p>So there&rsquo;s this myth that if Arch Linux gets too old then you can&rsquo;t update the install anymore. I don&rsquo;t exactly know what classifies as &ldquo;too old&rdquo; since I&rsquo;ve managed to update installs up to 2 years out of date. However, I decided to go a step further and update an install that&rsquo;s 5 years out of date.</p><h1 id=problems>Problems</h1><p>The best way to avoid running into serious problems is to read the <a href=https://archlinux.org/news/ target=_blank rel="noopener noreferrer">Arch Linux news letter</a>
as it typically tells you how to fix any problems you may run into. So it&rsquo;s not as straight forward as running <code>pacman -Syu</code>, I tried that and ran into keyring problems. What I tried doing was installing the new <code>archlinux-keyring</code> before doing anything else. However, <a href=https://archlinux.org/news/now-using-zstandard-instead-of-xz-for-package-compression/ target=_blank rel="noopener noreferrer">pacman couldn&rsquo;t recognize the new zstd format of packages</a>
since libarchive added support in 2018. I had to use a <a href=https://pkgbuild.com/~eschwartz/repo/x86_64-extracted/ target=_blank rel="noopener noreferrer">statically linked pacman binary</a>
.
<img src=../../assets/upgrading-old-arch-install/Screenshot_20210702_195325.png alt="screenshot of pacman error"></p><h1 id=how-i-got-arch-linux-to-upgrade>How I got Arch Linux to upgrade</h1><p>So after downloading a statically linked pacman binary, I was able to run:</p><pre tabindex=0><code># ./pacman-static -Sy archlinux-keyring
</code></pre><p>Which installed the new keyring, and after that I could run</p><pre tabindex=0><code># ./pacman-static -Su --overwrite=&#34;*&#34;
</code></pre><p><code>--overwrite</code> is needed to overwrite any conflicting files by force.
After that it went smoothly. I had to force restart the VM because it was unable to shut down and restart properly.
<img src=../../assets/upgrading-old-arch-install/Screenshot_20210702_202652.png alt="screenshot post upgrade"></p><h1 id=conclusion>Conclusion</h1><p>So while it&rsquo;s true that you will run into problems upgrading an old install of Arch Linux, it&rsquo;s a myth that these problems are unfixable and you have to reinstall if your install gets too old. As I&rsquo;ve demonstrated you can fix these problems if you reinstall the keyring (which you usually have to do if your install gets too out of date anyway) and use a static pacman binary to work around the error about unsupported package format. So don&rsquo;t stress too much about updating your Arch Linux install, you should be fine as long as you read the news letter and are aware of possible problems you may run into, usually they&rsquo;re very fixable.</p></article><section class="article author"><img class=avatar src="https://avatars.githubusercontent.com/u/18562602?v=4" alt><p class=name>alicela1n</p><div class=bio>Magical girl from another dimension.</div><div class=details><a class=item href=https://github.com/alicela1n target=_blank rel="noopener noreferrer"><span class="iconfont icon-github"></span>&nbsp;alicela1n</a></div></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=../../post/2021-07-14-using-wayland-daily-on-plasma/><span class="iconfont icon-article"></span>Using Wayland daily on KDE Plasma, My Experience</a></p><p><a class=link href=../../post/2021-06-15-linux-guide-for-windows-users/><span class="iconfont icon-article"></span>How to switch from Windows to Linux</a></p></section></div></section><section id=footer><div style=display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between><p style=flex-shrink:0>Â©2022 alicela1n</p><p><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section></body></html>